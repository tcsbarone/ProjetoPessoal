<link href="../Css/Editar.css" rel="stylesheet">

<html lang="pt-br">
	<head>
  	<title>Editar</title>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	</head>
	<body onload="inicializacao();">
		<div class="titulo">
		  	<h1>Editar</h1>
		</div>
		<br>
		<form action="../../Controller/Alterar.php" method="POST" id="formulario">
			<div class="form-group menu">
				<div class="row">
					<div class="col-md-6">
						<label class="control-label cor-letra">Nome</label>
						<input type="text" class="form-control" name="nome" id="nome" placeholder="nome">
					</div>

					<div class="col-md-3">
						<label class="control-label cor-letra">CPF</label>
						<input type="text" class="form-control" maxlength="14" name="cpf" id="cpf" placeholder="___.___.___-__" OnKeyPress="formatar('###.###.###-##', this)">
					</div>

			        <div class="col-md-3">
			        	<label class="control-label cor-letra">Data de Nascimento</label>
			            <input type="text" class="form-control" maxlength="10" name="datanascimento" id="datanascimento" placeholder="__/__/____" OnKeyPress="formatar('##/##/####', this)">
			        </div>
				</div>
			</div>

			<div class="form-group menu">
				<div class="row">
					<div class="col-md-2">
						<label class="control-label cor-letra">Sexo</label>
						<br>
						<input type="radio" name="genero" id="masculino" value="M">
						<label for="masculino" class="cor-letra">Masculino</label>
						<input type="radio" name="genero" id="feminino" value="F">
						<label for="feminino" class="cor-letra">Feminino</label>
					</div>

					<div class="col-md-2">
						<label class="control-label cor-letra">Telefone</label>
						<input type="text" class="form-control" maxlength="12" name="telefone" id="telefone" placeholder="__ ____-____" OnKeyPress="formatar('## ####-####', this)">
					</div>

					<div class="col-md-2">
						<label class="control-label cor-letra">Celular</label>
						<input type="text" class="form-control" maxlength="13" name="celular" id="celular" placeholder="__ _____-____" OnKeyPress="formatar('## #####-####', this)">
					</div>

					<div class="col-md-6">
						<label class="control-label cor-letra">E-mail</label>
						<input type="text" class="form-control" name="email" id="email" placeholder="e-mail">
					</div>
				</div>
			</div>

			<div class="form-group menu">
				<div class="row">
					<div class="col-md-2">
						<label class="control-label cor-letra">CEP</label>
						<input type="text" class="form-control" maxlength="9" name="cep" id="cep" placeholder="_____-___" OnKeyPress="formatar('#####-###', this)">
					</div>

					<div class="col-md-6">
						<label class="control-label cor-letra">Endereço</label>
						<input type="text" class="form-control" name="endereco" id="endereco" placeholder="endereço">
					</div>

					<div class="col-md-1">
						<label class="control-label cor-letra">Número</label>
						<input type="text" class="form-control" name="numero" id="numero" placeholder="Nº">
					</div>

					<div class="col-md-3">
						<label class="control-label cor-letra">Bairro</label>
						<input type="text" class="form-control" name="bairro" id="bairro" placeholder="bairro">
					</div>
				</div>
			</div>

			<div class="form-group menu">
				<div class="row">
					<div class="col-md-3">
						<label class="control-label cor-letra">Cidade</label>
						<select class="form-control" name="cidade" id="cidade">
							<option value="marilia">Marília</option> 
						  	<option value="ourinhos">Ourinhos</option>
						  	<option value="lins">Lins</option>
						  	<option value="garca">Garça</option>
						  	<option value="pompeia">Pompéia</option>
						  	<option value="assis">Assis</option>
						</select>
					</div>

					<div class="col-md-3">
						<label class="control-label cor-letra">Estado</label>
						<select class="form-control" name="estado" id="estado">
							<option value="SP">São Paulo</option> 
						  	<option value="AC">Acre</option>
						  	<option value="AL">Alagoas</option>
						  	<option value="AM">Amazonas</option>
						  	<option value="ES">Espírito Santo</option>
						  	<option value="RJ">Rio de Janeiro</option> 
						</select>
					</div>

					<div class="col-md-3">
						<label class="control-label cor-letra">Profissão</label>
						<input type="text" class="form-control" name="profissao" id="profissao" placeholder="profissão">
					</div>

					<div class="col-md-3">
						<label class="control-label cor-letra">Senha</label>
						<input type="password" class="form-control" name="senha" id="senha" placeholder="senha">
					</div>
				</div>
			</div>

			<div class="form-group">
				<div class="row">
					<div class="col-md-9">
						<button type="button" id="dados" class="btn btn-light botao" onclick="CarregarDados();" title="Clique aqui para Carregar os dados">
							Carregar Dados
						</button>	
					</div>
					<div class="col-md-2">
						<button type="submit" id="editar" class="btn btn-light botao" title="Clique aqui para Editar">
							Editar
						</button>	
					</div>
				</div>
			</div>
		</form>
	    <script type="text/javascript">

	    	function formatar(mascara, documento){
		    	var i = documento.value.length;
		    	var saida = mascara.substring(0,1);
		    	var texto = mascara.substring(i);
		    	  
		    	if (texto.substring(0,1) != saida){
		    	    documento.value += texto.substring(0,1);
		    	}
	    	}

	    	function CarregarDados(){
				$.ajax({
	                type: 'POST',
	                url: '../../Controller/Editar.php',
	                data: $('#formulario').serialize(),
	                dataType: 'json',
	                success: function(json){
	                	
	                	if(json.erro == 'N'){
	                		$('#nome').val(json.nome);
	                		$('#cpf').val(json.cpf);
	                		$('#nascimento').val(json.nascimento);
	                		$('.genero').val(json.sexo);
	                		$('#telefone').val(json.telefone);
	                		$('#celular').val(json.celular);
	                		$('#email').val(json.email);
	                		$('#cep').val(json.cep);
	                		$('#endereco').val(json.endereco);
	                		$('#numero').val(json.numero);
	                		$('#bairro').val(json.bairro);
	                		$('#cidade').select('val',json.cidade);
	                		$('#estado').select('val',json.estado);
	                		$('#profissao').val(json.profissao);
	                		$('#senha').val(json.senha);
						}
	                },
	                error: function(json){
	                	alert("A Conexão não foi realizada!");
	                }
		        });
	    	}
	    
	    </script>
	</body>
</html>